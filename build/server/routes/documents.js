// Generated by CoffeeScript 1.7.1
(function() {
  module.exports = function(_arg) {
    var app, log;
    app = _arg.app, log = _arg.log;
    return {
      '/api/documents': {
        get: function() {
          log.info('Get all documents');
          return app.db((function(_this) {
            return function(collection) {
              return collection.find({}, {
                'sort': 'url'
              }).toArray(function(err, docs) {
                if (err) {
                  throw err;
                }
                _this.res.writeHead(200, {
                  'content-type': 'application/json'
                });
                _this.res.write(JSON.stringify(docs));
                return _this.res.end();
              });
            };
          })(this));
        }
      }
    };
  };

}).call(this);
